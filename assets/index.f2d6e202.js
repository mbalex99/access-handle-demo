var S=Object.defineProperty;var f=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var b=(e,t,n)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,v=(e,t)=>{for(var n in t||(t={}))y.call(t,n)&&b(e,n,t[n]);if(f)for(var n of f(t))E.call(t,n)&&b(e,n,t[n]);return e};var h=(e,t)=>{var n={};for(var o in e)y.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&f)for(var o of f(e))t.indexOf(o)<0&&E.call(e,o)&&(n[o]=e[o]);return n};import{R as a,c as A,r as w,g as H,a as T}from"./vendor.58c4ff87.js";const B=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerpolicy&&(c.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?c.credentials="include":r.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(r){if(r.ep)return;r.ep=!0;const c=n(r);fetch(r.href,c)}};B();const k=({title:e})=>a.createElement("header",{className:"bg-white shadow"},a.createElement("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},a.createElement("h1",{className:"text-3xl font-bold leading-tight text-gray-900"},e)));function F(o){var r=o,{className:e,children:t}=r,n=h(r,["className","children"]);return a.createElement("button",v({type:"button",className:A("inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",e)},n),t)}const D=()=>{var e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);const[t,n]=w.exports.useState(""),[o,r]=w.exports.useState("");async function c(){const u=H(async d=>{const i=await(await(await navigator.storage.getDirectory()).getFileHandle("foo.txt",{create:!0})).createSyncAccessHandle(),x=new TextEncoder().encode(d);i.write(x,{at:0}),await i.close()});if(e)await u(t);else{const l=await(await(await navigator.storage.getDirectory()).getFileHandle("foo.txt",{create:!0})).createWritable(),m=new TextEncoder().encode(t);await l.write(m),await l.close()}}async function s(){const u=H(async()=>{const l=await(await(await navigator.storage.getDirectory()).getFileHandle("foo.txt",{create:!0})).createSyncAccessHandle(),i=await l.getSize(),m=new ArrayBuffer(i);l.read(m,{at:0});const x=new TextDecoder,N=new Uint8Array(m),p=x.decode(N);return console.log("text read from disk",p),await l.close(),p});if(e){const d=await u();r(d)}else{const i=await(await(await(await navigator.storage.getDirectory()).getFileHandle("foo.txt",{create:!0})).getFile()).text();r(i)}}return w.exports.useEffect(()=>{s()},[]),a.createElement(a.Fragment,null,a.createElement(k,{title:"Access Handle Demo"}),a.createElement("main",null,a.createElement("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8 grid grid-cols-2 gap-4"},a.createElement("div",null,a.createElement("h2",null,"File Editor"),a.createElement("textarea",{value:t,onChange:u=>{n(u.currentTarget.value)},className:"resize-y w-full rounded-md bg-black text-white p-4"}),a.createElement("div",{className:"grid grid-cols-2 gap-2"},a.createElement(F,{className:"mb-3",onClick:()=>{c()}},"Save"))),a.createElement("div",null,a.createElement("h2",null,"File Reader"),a.createElement("p",{className:"w-full rounded-md bg-black text-white p-4 mb-3 font-mono"},o),a.createElement("div",{className:"grid grid-cols-2 gap-2"},a.createElement(F,{className:"mb-3",onClick:()=>{s()}},"Read from File"))))))},R=()=>a.createElement(D,null);T.render(a.createElement(a.StrictMode,null,a.createElement(R,null)),document.getElementById("root"));
